-- @path Forms=/at.ac.tuwien.big.forms.transformations/metamodel/forms.ecore

module Entities2Forms;
create OUT : Forms from IN : Forms;

rule EntityModel2FormModel {
	from
		em : Forms!EntityModel
	to 
		fm : Forms!FormModel (
			forms <- em.entityModelElements
		)
}

rule Entity2Form {
	from
		em : Forms!Entity
	to 
		fm : Forms!Form (
			-- Ex: [form element] <- em.[form element]
			name <- em.name,
			title <- em.name,
			-- pages should include per default the Form's associate entities 
			-- AND should include any Entities LINKED as a relationship
			pages <- thisModule.NewPage(em)
--			pages <- thisModule.newPage(
--				em.features -> select(e | e.oclIsTypeOf(Forms!Relationship)).target
--			)
		)
	do {
	}
}

-- rule w/o parameters
lazy rule NewPage {
	from 
		em : Forms!Entity
	to
		p : Forms!Page (
			title <- (em.name + ' Details')
		)
	do {
		p;
	}
}

